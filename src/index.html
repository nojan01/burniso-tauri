<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>BurnISO to USB</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <!-- Confirm Dialog Modal -->
  <div id="confirm-modal" class="modal hidden">
    <div class="modal-backdrop"></div>
    <div class="modal-content modal-warning">
      <div class="modal-header warning">
        <span class="modal-icon">âš ï¸</span>
        <h2 id="confirm-title" data-i18n="dialogs.warning">Warnung</h2>
      </div>
      <div class="modal-body">
        <p id="confirm-message" class="confirm-message" data-i18n="dialogs.confirm">Sind Sie sicher?</p>
      </div>
      <div class="modal-footer">
        <button id="confirm-cancel-btn" class="btn secondary" data-i18n="dialogs.cancel">Abbrechen</button>
        <button id="confirm-ok-btn" class="btn danger" data-i18n="dialogs.yes">Ja, lÃ¶schen</button>
      </div>
    </div>
  </div>

  <!-- Password Dialog Modal -->
  <div id="password-modal" class="modal hidden">
    <div class="modal-backdrop"></div>
    <div class="modal-content">
      <div class="modal-header">
        <span class="modal-icon">ğŸ”</span>
        <h2 data-i18n="dialogs.adminPassword">Administrator-Passwort</h2>
      </div>
      <div class="modal-body">
        <p id="password-prompt" data-i18n="dialogs.adminPasswordPrompt">Zum AusfÃ¼hren dieser Aktion werden Administrator-Rechte benÃ¶tigt.</p>
        <div class="password-input-wrapper">
          <input type="password" id="password-input" data-i18n-placeholder="dialogs.enterPassword" placeholder="macOS-Passwort eingeben" autocomplete="off" />
        </div>
      </div>
      <div class="modal-footer">
        <button id="password-cancel-btn" class="btn secondary" data-i18n="dialogs.cancel">Abbrechen</button>
        <button id="password-ok-btn" class="btn primary" data-i18n="dialogs.ok">OK</button>
      </div>
    </div>
  </div>

  <div class="container">
    <!-- App Header -->
    <header class="app-header">
      <div class="header-icon">ğŸ”¥</div>
      <div class="header-text">
        <h1 data-i18n="app.title">burnISOtoUSB</h1>
        <p data-i18n="app.subtitle">ISO â†” USB Images verwalten</p>
      </div>
    </header>
    <div class="tabs">
      <button class="tab-btn active" data-tab="burn" data-i18n="tabs.burn">ISO â†’ USB</button>
      <button class="tab-btn" data-tab="backup" data-i18n="tabs.backup">USB â†’ ISO</button>
      <button class="tab-btn" data-tab="diagnose" data-i18n="tabs.diagnose">ğŸ” USB prÃ¼fen</button>
    </div>

    <!-- ISO to USB Tab -->
    <div id="burn-tab" class="tab-content active">
      <div class="section">
        <h3>ğŸ“€ <span data-i18n="burn.selectIso">ISO-Datei auswÃ¤hlen</span></h3>
        <div class="file-input-row">
          <input type="text" id="iso-path" data-i18n-placeholder="burn.noFile" placeholder="Keine Datei ausgewÃ¤hlt" readonly />
          <button id="select-iso-btn" class="btn secondary" data-i18n="burn.browse">Durchsuchen</button>
        </div>
      </div>

      <div class="section">
        <h3>ğŸ’¾ <span data-i18n="burn.selectUsb">USB-Stick auswÃ¤hlen</span></h3>
        <div class="disk-row">
          <select id="burn-disk-select">
            <option value="" data-i18n="burn.selectUsbPlaceholder">-- USB-Stick wÃ¤hlen --</option>
          </select>
          <button id="refresh-burn-disks" class="btn secondary icon-btn" data-i18n-title="burn.refresh" title="Aktualisieren">ğŸ”„</button>
        </div>
        <div id="burn-disk-info" class="disk-info"></div>
      </div>

      <div class="section">
        <h3>âš™ï¸ <span data-i18n="burn.options">Optionen</span></h3>
        <div class="checkbox-group">
          <label class="checkbox-label">
            <input type="checkbox" id="verify-after-burn" checked />
            <span class="checkbox-text">
              <strong data-i18n="burn.verifyAfterBurn">Nach dem Brennen verifizieren</strong>
              <small data-i18n="burn.verifyDescription">Vergleicht geschriebene Daten mit der ISO-Datei</small>
            </span>
          </label>
          <label class="checkbox-label">
            <input type="checkbox" id="eject-after-burn" checked />
            <span class="checkbox-text">
              <strong data-i18n="burn.ejectAfterBurn">USB-Stick nach Abschluss auswerfen</strong>
              <small data-i18n="burn.ejectDescription">Wirft den DatentrÃ¤ger sicher aus</small>
            </span>
          </label>
        </div>
      </div>

      <div class="section">
        <h3>ğŸ“Š <span data-i18n="burn.progress">Fortschritt</span></h3>
        <div class="progress-container">
          <div class="progress-bar" id="burn-progress">
            <div class="progress-fill" id="burn-progress-fill"></div>
          </div>
          <span class="progress-text" id="burn-progress-text">0%</span>
        </div>
        <div id="burn-phase" class="phase-text"></div>
      </div>

      <div class="button-row">
        <button id="burn-btn" class="btn primary large" disabled><span data-i18n="burn.burnButton">ğŸ”¥ ISO auf USB brennen</span></button>
        <button id="cancel-burn-btn" class="btn danger" disabled data-i18n="burn.cancel">Abbrechen</button>
      </div>

      <div class="section">
        <h3>ğŸ“‹ <span data-i18n="burn.log">Protokoll</span></h3>
        <div id="burn-log" class="log-output"></div>
      </div>
    </div>

    <!-- USB to ISO Tab -->
    <div id="backup-tab" class="tab-content">
      <div class="section">
        <h3>ğŸ’¾ <span data-i18n="backup.selectUsb">USB-Stick auswÃ¤hlen</span></h3>
        <div class="disk-row">
          <select id="backup-disk-select">
            <option value="" data-i18n="backup.selectUsbPlaceholder">-- USB-Stick wÃ¤hlen --</option>
          </select>
          <button id="refresh-backup-disks" class="btn secondary icon-btn" data-i18n-title="burn.refresh" title="Aktualisieren">ğŸ”„</button>
        </div>
        <div id="backup-disk-info" class="disk-info"></div>
      </div>

      <div class="section">
        <h3>ğŸ“ <span data-i18n="backup.selectDestination">Speicherort fÃ¼r Image</span></h3>
        <div class="file-input-row">
          <input type="text" id="backup-destination" data-i18n-placeholder="backup.destinationPlaceholder" placeholder="Ziel wÃ¤hlen" readonly />
          <button id="select-destination-btn" class="btn secondary" data-i18n="backup.saveAs">Speichern unter</button>
        </div>
      </div>

      <div class="section">
        <h3>âš™ï¸ <span data-i18n="backup.backupMode">Sicherungsmodus</span></h3>
        <div class="radio-group">
          <label class="radio-label">
            <input type="radio" name="backup-mode" value="raw" checked />
            <span class="radio-text">
              <strong data-i18n="backup.rawMode">Sektorgenau (Raw)</strong>
              <small data-i18n="backup.rawDescription">Komplettes Image inkl. aller Sektoren - langsamer aber exakt</small>
            </span>
          </label>
          <label class="radio-label" id="filesystem-mode-label">
            <input type="radio" name="backup-mode" value="filesystem" disabled />
            <span class="radio-text">
              <strong data-i18n="backup.filesystemMode">Dateibasiert (Schnell)</strong>
              <small data-i18n="backup.filesystemDescription">Nur belegte Dateien - schneller und komprimiert</small>
            </span>
          </label>
        </div>
        <div id="filesystem-note" class="note hidden">
          âœ… <span data-i18n="backup.filesystemSupported">Dateisystem unterstÃ¼tzt:</span> <span id="detected-fs"></span>
        </div>
      </div>

      <div class="section">
        <h3>ğŸ“Š <span data-i18n="backup.progress">Fortschritt</span></h3>
        <div class="progress-container">
          <div class="progress-bar" id="backup-progress">
            <div class="progress-fill" id="backup-progress-fill"></div>
          </div>
          <span class="progress-text" id="backup-progress-text">0%</span>
        </div>
      </div>

      <div class="button-row">
        <button id="backup-btn" class="btn primary large" disabled><span data-i18n="backup.backupButton">ğŸ’¿ USB sichern</span></button>
        <button id="cancel-backup-btn" class="btn danger" disabled data-i18n="backup.cancel">Abbrechen</button>
      </div>

      <div class="section">
        <h3>ğŸ“‹ <span data-i18n="backup.log">Protokoll</span></h3>
        <div id="backup-log" class="log-output"></div>
      </div>
    </div>

    <!-- USB Diagnose Tab -->
    <div id="diagnose-tab" class="tab-content">
      <div class="section">
        <h3>ğŸ’¾ <span data-i18n="diagnose.selectUsb">USB-Stick auswÃ¤hlen</span></h3>
        <div class="disk-row">
          <select id="diagnose-disk-select">
            <option value="" data-i18n="diagnose.selectUsbPlaceholder">-- USB-Stick wÃ¤hlen --</option>
          </select>
          <button id="refresh-diagnose-disks" class="btn secondary icon-btn" data-i18n-title="burn.refresh" title="Aktualisieren">ğŸ”„</button>
        </div>
        <div id="diagnose-disk-info" class="disk-info"></div>
      </div>

      <!-- SMART Status Section (Collapsible) -->
      <div class="section collapsible" id="smart-section">
        <h3 class="collapsible-header" id="smart-header">
          <span class="collapse-icon">â–¶</span>
          ğŸ’¾ <span data-i18n="diagnose.smartStatus">S.M.A.R.T. Status</span>
          <span id="smart-status-badge" class="status-badge hidden"></span>
        </h3>
        <div class="collapsible-content hidden" id="smart-content">
          <div id="smart-container" class="smart-container">
            <div id="smart-loading" class="smart-loading hidden">
              <span class="spinner"></span> <span data-i18n="messages.loading">LÃ¤dt...</span>
            </div>
            <div id="smart-unavailable" class="smart-unavailable hidden">
              <span class="smart-icon">â„¹ï¸</span>
              <span id="smart-unavailable-msg" data-i18n="diagnose.smartUnavailable">SMART-Daten nicht verfÃ¼gbar</span>
            </div>
            <div id="smart-data" class="smart-data hidden">
              <div class="smart-health-row">
                <span class="smart-health-label" data-i18n="diagnose.healthStatus">Gesundheitsstatus:</span>
                <span id="smart-health-value" class="smart-health-value">-</span>
              </div>
              <div class="smart-details-grid">
                <div class="smart-detail-item" id="smart-temp-item">
                  <span class="smart-detail-label" data-i18n="diagnose.temperature">Temperatur:</span>
                  <span id="smart-temp-value" class="smart-detail-value">-</span>
                </div>
                <div class="smart-detail-item" id="smart-hours-item">
                  <span class="smart-detail-label" data-i18n="diagnose.powerOnHours">Betriebsstunden:</span>
                  <span id="smart-hours-value" class="smart-detail-value">-</span>
                </div>
                <div class="smart-detail-item" id="smart-cycles-item">
                  <span class="smart-detail-label" data-i18n="diagnose.powerCycles">Ein-/Ausschaltzyklen:</span>
                  <span id="smart-cycles-value" class="smart-detail-value">-</span>
                </div>
                <div class="smart-detail-item" id="smart-reallocated-item">
                  <span class="smart-detail-label" data-i18n="diagnose.reallocatedSectors">Umgemappte Sektoren:</span>
                  <span id="smart-reallocated-value" class="smart-detail-value">-</span>
                </div>
                <div class="smart-detail-item" id="smart-pending-item">
                  <span class="smart-detail-label" data-i18n="diagnose.pendingSectors">Wartende Sektoren:</span>
                  <span id="smart-pending-value" class="smart-detail-value">-</span>
                </div>
                <div class="smart-detail-item" id="smart-uncorrectable-item">
                  <span class="smart-detail-label" data-i18n="diagnose.uncorrectableSectors">Unkorrigierbare Sektoren:</span>
                  <span id="smart-uncorrectable-value" class="smart-detail-value">-</span>
                </div>
              </div>
              <div id="smart-source" class="smart-source"></div>
              <div id="smart-warning" class="smart-warning hidden"></div>
            </div>
          </div>
        </div>
      </div>

      <div class="section">
        <h3>ğŸ”§ <span data-i18n="diagnose.testType">Testmodus</span></h3>
        <div class="radio-group">
          <label class="radio-label">
            <input type="radio" name="diagnose-mode" value="surface" checked />
            <span class="radio-text">
              <strong data-i18n="diagnose.surfaceScan">ğŸ” Surface Scan (Nur Lesen)</strong>
              <small data-i18n="diagnose.surfaceDescription">Liest alle Sektoren und findet Lesefehler - Daten bleiben erhalten</small>
            </span>
          </label>
          <label class="radio-label">
            <input type="radio" name="diagnose-mode" value="full" />
            <span class="radio-text">
              <strong data-i18n="diagnose.fullTest">âš ï¸ Volltest (Schreiben + Lesen)</strong>
              <small data-i18n="diagnose.fullDescription">Schreibt Testmuster und vergleicht - LÃ–SCHT ALLE DATEN!</small>
            </span>
          </label>
          <label class="radio-label">
            <input type="radio" name="diagnose-mode" value="speed" />
            <span class="radio-text">
              <strong data-i18n="diagnose.speedTest">âš¡ Geschwindigkeitstest</strong>
              <small data-i18n="diagnose.speedDescription">Misst Lese- und Schreibgeschwindigkeit - LÃ–SCHT ALLE DATEN!</small>
            </span>
          </label>
        </div>
        <div id="diagnose-warning" class="note warning hidden">
          âš ï¸ <span data-i18n="diagnose.dataWarning">WARNUNG: Dieser Test lÃ¶scht alle Daten auf dem USB-Stick!</span>
        </div>
      </div>

      <div class="section">
        <h3>ğŸ“Š <span data-i18n="diagnose.progress">Fortschritt</span></h3>
        <div class="progress-container">
          <div class="progress-bar" id="diagnose-progress">
            <div class="progress-fill" id="diagnose-progress-fill"></div>
          </div>
          <span class="progress-text" id="diagnose-progress-text">0%</span>
        </div>
        <div id="diagnose-phase" class="phase-text"></div>
      </div>

      <div class="section collapsible" id="diagnose-stats-section">
        <h3 class="collapsible-header" id="stats-header">
          <span class="collapse-icon">â–¶</span>
          ğŸ“ˆ <span data-i18n="diagnose.statistics">Statistiken</span>
          <span id="stats-summary-badge" class="status-badge hidden"></span>
        </h3>
        <div class="collapsible-content hidden" id="stats-content">
          <div class="stats-grid">
            <div class="stat-item">
              <span class="stat-label" data-i18n="diagnose.sectorsChecked">GeprÃ¼fte Sektoren:</span>
              <span class="stat-value" id="stat-sectors-checked">0</span>
            </div>
            <div class="stat-item">
              <span class="stat-label" data-i18n="diagnose.errorsFound">Fehler gefunden:</span>
              <span class="stat-value" id="stat-errors-found">0</span>
            </div>
            <div class="stat-item">
              <span class="stat-label" data-i18n="diagnose.readSpeed">Lesegeschwindigkeit:</span>
              <span class="stat-value" id="stat-read-speed">-</span>
            </div>
            <div class="stat-item">
              <span class="stat-label" data-i18n="diagnose.writeSpeed">Schreibgeschwindigkeit:</span>
              <span class="stat-value" id="stat-write-speed">-</span>
            </div>
          </div>
        </div>
      </div>

      <div class="button-row">
        <button id="diagnose-btn" class="btn primary large" disabled><span data-i18n="diagnose.startTest">ğŸ” Test starten</span></button>
        <button id="cancel-diagnose-btn" class="btn danger" disabled data-i18n="diagnose.cancel">Abbrechen</button>
      </div>

      <div class="section">
        <h3>ğŸ“‹ <span data-i18n="diagnose.log">Protokoll</span></h3>
        <div id="diagnose-log" class="log-output"></div>
      </div>
    </div>
  </div>

  <script src="i18n.js"></script>
  <script src="main.js"></script>
</body>
</html>
